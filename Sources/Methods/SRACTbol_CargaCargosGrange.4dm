//%attributes = {}
  //SRACTbol_CargaCargosGrange

C_POINTER:C301($var1;$var2;$var3;$var4;$var5;$var6)
C_TEXT:C284(vtACT_DetalleCargo11;vtACT_DetalleCargo21;vtACT_DetalleCargo31;vtACT_DetalleCargo41;vtACT_DetalleCargo51;vtACT_DetalleCargo61;vtACT_DetalleCargo71;vtACT_DetalleCargo81;vtACT_DetalleCargo91;vtACT_DetalleCargo101;vtACT_DetalleCargo111;vtACT_DetalleCargo121;vtACT_DetalleCargo131)
C_REAL:C285(vrACT_PagadoCargo11;vrACT_PagadoCargo21;vrACT_PagadoCargo31;vrACT_PagadoCargo41;vrACT_PagadoCargo51;vrACT_PagadoCargo61;vrACT_PagadoCargo71;vrACT_PagadoCargo81;vrACT_PagadoCargo91;vrACT_PagadoCargo101;vrACT_PagadoCargo111;vrACT_PagadoCargo121;vrACT_PagadoCargo131)
C_TEXT:C284(vtACT_Alumno11;vtACT_Alumno21;vtACT_Alumno31;vtACT_Alumno41;vtACT_Alumno51;vtACT_Alumno61;vtACT_Alumno71;vtACT_Alumno81;vtACT_Alumno91;vtACT_Alumno101;vtACT_Alumno111;vtACT_Alumno121;vtACT_Alumno131)
C_TEXT:C284(vCodigoFamilia1;vCodigoFamilia2)
C_REAL:C285(vTotal1;vNeto1;vIVA1;vporcentajeIVA1;vTotal2;vNeto2;vIVA2;vporcentajeIVA2)
C_REAL:C285(vTotalDesctos1;vTotalDesctos2)
C_LONGINT:C283(vNumBol1;vNumBol2)
C_TEXT:C284(vNombreApdo1;vDireccionApdo1;vComunaApdo1;vCiudadApdo1;vNombreApdo2;vDireccionApdo2;vComunaApdo2;vCiudadApdo2)
_O_C_STRING:C293(80;vRUTApdo1;vRUTApdo2)
C_TEXT:C284(vtACT_DetalleCargo12;vtACT_DetalleCargo22;vtACT_DetalleCargo32;vtACT_DetalleCargo42;vtACT_DetalleCargo52;vtACT_DetalleCargo62;vtACT_DetalleCargo72;vtACT_DetalleCargo82;vtACT_DetalleCargo92;vtACT_DetalleCargo102;vtACT_DetalleCargo112;vtACT_DetalleCargo122;vtACT_DetalleCargo132)
C_REAL:C285(vrACT_PagadoCargo12;vrACT_PagadoCargo22;vrACT_PagadoCargo32;vrACT_PagadoCargo42;vrACT_PagadoCargo52;vrACT_PagadoCargo62;vrACT_PagadoCargo72;vrACT_PagadoCargo82;vrACT_PagadoCargo92;vrACT_PagadoCargo102;vrACT_PagadoCargo112;vrACT_PagadoCargo122;vrACT_PagadoCargo132)
C_TEXT:C284(vtACT_Alumno12;vtACT_Alumno22;vtACT_Alumno32;vtACT_Alumno42;vtACT_Alumno52;vtACT_Alumno62;vtACT_Alumno72;vtACT_Alumno82;vtACT_Alumno92;vtACT_Alumno102;vtACT_Alumno112;vtACT_Alumno122;vtACT_Alumno132)
C_LONGINT:C283(vlACT_Cantidad11;vlACT_Cantidad21;vlACT_Cantidad31;vlACT_Cantidad41;vlACT_Cantidad51;vlACT_Cantidad61;vlACT_Cantidad71;vlACT_Cantidad81;vlACT_Cantidad91;vlACT_Cantidad101;vlACT_Cantidad111;vlACT_Cantidad121;vlACT_Cantidad131)
C_LONGINT:C283(vlACT_Cantidad12;vlACT_Cantidad22;vlACT_Cantidad32;vlACT_Cantidad42;vlACT_Cantidad52;vlACT_Cantidad62;vlACT_Cantidad72;vlACT_Cantidad82;vlACT_Cantidad92;vlACT_Cantidad102;vlACT_Cantidad112;vlACT_Cantidad122;vlACT_Cantidad132)
C_REAL:C285(vrACT_Unitario11;vrACT_Unitario21;vrACT_Unitario31;vrACT_Unitario41;vrACT_Unitario51;vrACT_Unitario61;vrACT_Unitario71;vrACT_Unitario81;vrACT_Unitario91;vrACT_Unitario101;vrACT_Unitario111;vrACT_Unitario121;vrACT_Unitario131)
C_REAL:C285(vrACT_Unitario12;vrACT_Unitario22;vrACT_Unitario32;vrACT_Unitario42;vrACT_Unitario52;vrACT_Unitario62;vrACT_Unitario72;vrACT_Unitario82;vrACT_Unitario92;vrACT_Unitario102;vrACT_Unitario112;vrACT_Unitario122;vrACT_Unitario132)
C_REAL:C285(vrACT_Descto11;vrACT_Descto21;vrACT_Descto31;vrACT_Descto41;vrACT_Descto51;vrACT_Descto61;vrACT_Descto71;vrACT_Descto81;vrACT_Descto91;vrACT_Descto101;vrACT_Descto111;vrACT_Descto121;vrACT_Descto131)
C_REAL:C285(vrACT_Descto12;vrACT_Descto22;vrACT_Descto32;vrACT_Descto42;vrACT_Descto52;vrACT_Descto62;vrACT_Descto72;vrACT_Descto82;vrACT_Descto92;vrACT_Descto102;vrACT_Descto112;vrACT_Descto122;vrACT_Descto132)
C_BOOLEAN:C305(vbACT_HideMonto11;vbACT_HideMonto21;vbACT_HideMonto31;vbACT_HideMonto41;vbACT_HideMonto51;vbACT_HideMonto61;vbACT_HideMonto71;vbACT_HideMonto81;vbACT_HideMonto91;vbACT_HideMonto101;vbACT_HideMonto111;vbACT_HideMonto121;vbACT_HideMonto131)
C_BOOLEAN:C305(vbACT_HideMonto12;vbACT_HideMonto22;vbACT_HideMonto32;vbACT_HideMonto42;vbACT_HideMonto52;vbACT_HideMonto62;vbACT_HideMonto72;vbACT_HideMonto82;vbACT_HideMonto92;vbACT_HideMonto102;vbACT_HideMonto112;vbACT_HideMonto122;vbACT_HideMonto132)
C_BOOLEAN:C305(vbACT_HideNeto1;vbACT_HideNeto2)
C_BOOLEAN:C305(vbACT_HideTotal1;vbACT_HideTotal2)
C_BOOLEAN:C305(vbACT_HidePorcIVA1;vbACT_HidePorcIVA2)
C_BOOLEAN:C305(vbACT_HideIVA1;vbACT_HideIVA2)
ARRAY TEXT:C222(atACT_CodigoFamilia;0)
ARRAY REAL:C219(arACT_MontoPagado;0)
ARRAY LONGINT:C221(alACT_Cantidad;0)
  //20130626 RCH NF CANTIDAD
ARRAY REAL:C219(arACT_Cantidad;0)
ARRAY REAL:C219(arACT_Unitario;0)
ARRAY REAL:C219(arACT_CTotalDesctos;0)

C_LONGINT:C283($1)
C_TEXT:C284($bol)
$bol:=String:C10($1)

If (Undefined:C82(vbACT_EmisionMasivaBoletas))
	vbACT_EmisionMasivaBoletas:=False:C215
End if 

SRACTbol_EndBoletaGrange (Num:C11($bol))

QUERY:C277([ACT_Transacciones:178];[ACT_Transacciones:178]No_Boleta:9=[ACT_Boletas:181]ID:1)
CREATE SET:C116([ACT_Transacciones:178];"Transacciones")
KRL_RelateSelection (->[ACT_Cargos:173]ID:1;->[ACT_Transacciones:178]ID_Item:3;"")
QUERY:C277([Personas:7];[Personas:7]No:1=[ACT_Boletas:181]ID_Apoderado:14)
$CuantosCargos:=ACTcc_LoadCargosIntoArrays (True:C214)
ARRAY REAL:C219(arACT_MontoPagado;$CuantosCargos)
For ($t;1;Size of array:C274(alACT_RecNumsCargos))
	GOTO RECORD:C242([ACT_Cargos:173];alACT_RecNumsCargos{$t})
	arACT_MontoPagado{$t}:=ACTbol_GetMontoLinea ("Transacciones")
End for 
ACTcfg_LoadConfigData (8)
ARRAY REAL:C219(arACT_Cantidad;Size of array:C274(atACT_CGlosaImpresion))
ARRAY REAL:C219(arACT_Unitario;Size of array:C274(atACT_CGlosaImpresion))
If (cbAgruparBoletas=1)
	ACTac_AgrupaCargos 
End if 
If (cb_ImprimirCeros=0)
	arACT_MontoPagado{0}:=0
	ARRAY LONGINT:C221($DA_Return;0)
	AT_SearchArray (->arACT_MontoPagado;"=";->$DA_Return)
	For ($u;Size of array:C274($DA_Return);1;-1)
		AT_Delete ($DA_Return{$u};1;->atACT_CGlosaImpresion;->arACT_MontoPagado;->atACT_CAlumno;->arACT_Cantidad;->arACT_Unitario;->arACT_CTotalDesctos)
	End for 
End if 
If (Size of array:C274(atACT_CGlosaImpresion)<=13)
	$NumVars:=Size of array:C274(atACT_CGlosaImpresion)
Else 
	$NumVars:=13
End if 
For ($t;1;$NumVars)
	$var1:=Get pointer:C304("vtACT_DetalleCargo"+String:C10($t)+$bol)
	$var2:=Get pointer:C304("vrACT_PagadoCargo"+String:C10($t)+$bol)
	$var3:=Get pointer:C304("vtACT_Alumno"+String:C10($t)+$bol)
	$var4:=Get pointer:C304("vlACT_Cantidad"+String:C10($t)+$bol)
	$var5:=Get pointer:C304("vrACT_Unitario"+String:C10($t)+$bol)
	$var6:=Get pointer:C304("vrACT_Descto"+String:C10($t)+$bol)
	$var7:=Get pointer:C304("vbACT_HideMonto"+String:C10($t)+$bol)
	$var1->:=atACT_CGlosaImpresion{$t}
	$var2->:=arACT_MontoPagado{$t}
	$var3->:=atACT_CAlumno{$t}
	$var4->:=arACT_Cantidad{$t}
	$var5->:=arACT_Unitario{$t}
	$var6->:=arACT_CTotalDesctos{$t}
	$var7->:=True:C214
End for 
If (Size of array:C274(atACT_CGlosaImpresion)>13)
	$var1:=Get pointer:C304("vtACT_DetalleCargo13"+$bol)
	$var2:=Get pointer:C304("vrACT_PagadoCargo13"+$bol)
	$var3:=Get pointer:C304("vtACT_Alumno13"+$bol)
	$var4:=Get pointer:C304("vlACT_Cantidad13"+$bol)
	$var5:=Get pointer:C304("vrACT_Unitario13"+$bol)
	$var6:=Get pointer:C304("vrACT_Descto13"+$bol)
	$var1->:="Otros"
	$var2->:=arACT_MontoPagado{13}
	$var3->:=""
	$var4->:=0
	$var5->:=0
	$var6->:=arACT_CTotalDesctos{13}
	For ($t;14;Size of array:C274(atACT_CGlosaImpresion))
		$var2->:=$var2->+arACT_MontoPagado{$t}
		$var6->:=$var6->+arACT_CTotalDesctos{$t}
	End for 
End if 
LOAD RECORD:C52([Personas:7])
If ($bol="1")
	vNombreApdo1:=[Personas:7]Apellidos_y_nombres:30
	vRUTApdo1:=[Personas:7]RUT:6
	vDireccionApdo1:=[Personas:7]ACT_DireccionEC:67
	vComunaApdo1:=[Personas:7]ACT_ComunaEC:68
	vCiudadApdo1:=[Personas:7]ACT_CiudadEC:69
	vFechaE1:=[ACT_Boletas:181]FechaEmision:3
	vNumBol1:=[ACT_Boletas:181]Numero:11
	KRL_RelateSelection (->[ACT_CuentasCorrientes:175]ID_Apoderado:9;->[Personas:7]No:1;"")
	KRL_RelateSelection (->[Familia:78]Numero:1;->[ACT_CuentasCorrientes:175]ID_Familia:2;"")
	SELECTION TO ARRAY:C260([Familia:78]Codigo_interno:14;atACT_CodigoFamilia)
	vCodigoFamilia1:=AT_array2text (->atACT_CodigoFamilia;" - ")
	vTotal1:=[ACT_Boletas:181]Monto_Total:6
	vNeto1:=Round:C94(vTotal1/<>vrACT_FactorIVA;<>vlACT_Decimales)
	vIVA1:=vTotal1-vNeto1
	vPorcentajeIVA1:=<>vrACT_TasaIVA
	vTotalDesctos1:=AT_GetSumArray (->arACT_CTotalDesctos)
	vbACT_HideTotal1:=True:C214
	vbACT_HideNeto1:=True:C214
	vbACT_HidePorcIVA1:=True:C214
	vbACT_HideIVA1:=True:C214
Else 
	vNombreApdo2:=[Personas:7]Apellidos_y_nombres:30
	vRUTApdo2:=[Personas:7]RUT:6
	vDireccionApdo2:=[Personas:7]ACT_DireccionEC:67
	vComunaApdo2:=[Personas:7]ACT_ComunaEC:68
	vCiudadApdo2:=[Personas:7]ACT_CiudadEC:69
	vFechaE2:=[ACT_Boletas:181]FechaEmision:3
	vNumBol2:=[ACT_Boletas:181]Numero:11
	KRL_RelateSelection (->[ACT_CuentasCorrientes:175]ID_Apoderado:9;->[Personas:7]No:1;"")
	KRL_RelateSelection (->[Familia:78]Numero:1;->[ACT_CuentasCorrientes:175]ID_Familia:2;"")
	SELECTION TO ARRAY:C260([Familia:78]Codigo_interno:14;atACT_CodigoFamilia)
	vCodigoFamilia2:=AT_array2text (->atACT_CodigoFamilia;" - ")
	vTotal2:=[ACT_Boletas:181]Monto_Total:6
	vNeto2:=Round:C94(vTotal2/<>vrACT_FactorIVA;<>vlACT_Decimales)
	vIVA2:=vTotal2-vNeto2
	vPorcentajeIVA2:=<>vrACT_TasaIVA
	vTotalDesctos2:=AT_GetSumArray (->arACT_CTotalDesctos)
	vbACT_HideTotal2:=True:C214
	vbACT_HideNeto2:=True:C214
	vbACT_HidePorcIVA2:=True:C214
	vbACT_HideIVA2:=True:C214
End if 
UNLOAD RECORD:C212([Personas:7])
UNLOAD RECORD:C212([ACT_CuentasCorrientes:175])
UNLOAD RECORD:C212([ACT_Cargos:173])
UNLOAD RECORD:C212([ACT_Transacciones:178])
CLEAR SET:C117("Transacciones")